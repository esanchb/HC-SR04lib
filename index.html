<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>HC_SR04 Arduino Lib: The Sensor HC-SR04 Arduino Library v1.0  mainpage documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HC_SR04 Arduino Lib
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">The Sensor HC-SR04 Arduino Library v1.0 mainpage documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro_sec"></a>
Overview</h1>
<pre class="fragment">Sensor HC-SR04 Arduino Library v1.0 
</pre><h1><a class="anchor" id="lib_fatures_sec"></a>
Library Features</h1>
<pre class="fragment">  &gt; Error Handling
  &gt; Unit Coversion Support (Centimeters &lt;&gt; Inches)
  &gt; Multiple Arduino Board Support
  &gt; Configurable Min Max Limits
  &gt; Simple adquisition process
</pre> <div class="image">
<img src="http://oi64.tinypic.com/mt15w3.jpg" alt="mt15w3.jpg"/>
<div class="caption">
Hardware Configuration</div></div>
<h2><a class="anchor" id="hwconfig_step"></a>
Step 1: Hardware Configuration</h2>
<pre class="fragment">Select Arduino pin assigment:


Sensor        Arduino Uno
 TriggerPin   12
 EchoPin      11
 VCC          Vcc 5v
 GND          Gnd

Units System = Metrics (Centimeters)
</pre><div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> Triger_Pin = 12;</div><div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> Echo_Pin = 11;</div><div class="line"><a class="code" href="class_h_c___s_r04_dev.html">HC_SR04Dev</a> Sensor_A(Triger_Pin, Echo_Pin,<a class="code" href="_h_c___s_r04__lib_8h.html#a7b521ba18979ed156de76918beca0fbfa45c3145a2a8a1505cbdbd04830ca039a">UNITS_METRIC</a>);</div></div><!-- fragment --><h2><a class="anchor" id="step1"></a>
Step 2: Arduino Setup</h2>
<p>We can configure the max and min limits for the HC_SR04 Library ....</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setup() {</div><div class="line">  Serial.begin(9600); <span class="comment">// Set BaudRate</span></div><div class="line">  <span class="comment">// Set Max and Min thresholds</span></div><div class="line">  <span class="comment">// Min: 10 cm</span></div><div class="line">  <span class="comment">// Max:200 cm</span></div><div class="line">  Sensor_A.SetMinMax(10, 200);</div><div class="line"> }</div></div><!-- fragment --><p> }</p>
<h2><a class="anchor" id="step3"></a>
Step 3: Read Sensor Request</h2>
<p>The function Sync() send a read request to the sensor and also return the status from the read. </p><div class="fragment"><div class="line">status_sens = Sensor_A.Sync();</div></div><!-- fragment --><h2><a class="anchor" id="step4"></a>
Step 4: Read Status Handling</h2>
<p>We can also manage the status of the last reading</p>
<div class="fragment"><div class="line"> <span class="keywordflow">switch</span> (status_sens) {</div><div class="line">  <span class="keywordflow">case</span> (<a class="code" href="_h_c___s_r04__lib_8h.html#afa1b1edf6947ca1c4024f4f52db00ee7a4aae3d8cbf8016488bfc27e16e5492c1">HC_SR04_OFF</a>): {</div><div class="line">      <span class="comment">// Hit here when the sensor is off :(</span></div><div class="line">      <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">  <span class="keywordflow">case</span> (<a class="code" href="_h_c___s_r04__lib_8h.html#afa1b1edf6947ca1c4024f4f52db00ee7a75a3c9ac21cf90f3a684c6eb6541d19b">HC_SR04_TIMEOUT_READ</a>): {</div><div class="line">      <span class="comment">// Hit here when the sensor is not connected :(</span></div><div class="line">      <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">  <span class="keywordflow">case</span> (<a class="code" href="_h_c___s_r04__lib_8h.html#afa1b1edf6947ca1c4024f4f52db00ee7ae06184c02f3d88443b47c0f903d72895">HC_SR04_READ_OK</a>): {</div><div class="line">      <span class="comment">// Hit here when the sensor read is betwen the valid thresholds :) !!</span></div><div class="line">      <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">  <span class="keywordflow">case</span> (<a class="code" href="_h_c___s_r04__lib_8h.html#afa1b1edf6947ca1c4024f4f52db00ee7aeeed0a4cc3e0e799aaec2407fd146285">HC_SR04_UNDER_MIN</a>): {</div><div class="line">    <span class="comment">// Hit here when the sensor read is under the expected thresholds :(</span></div><div class="line">      <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">  <span class="keywordflow">case</span> (<a class="code" href="_h_c___s_r04__lib_8h.html#afa1b1edf6947ca1c4024f4f52db00ee7a8b474fcff26ccf982124d8bf5d21ec16">HC_SR04_OVER_MAX</a>): {</div><div class="line">    <span class="comment">// Hit here when the sensor read is over  the expected thresholds :(</span></div><div class="line">      <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">  <span class="keywordflow">case</span> (<a class="code" href="_h_c___s_r04__lib_8h.html#afa1b1edf6947ca1c4024f4f52db00ee7a762f09b27a3ab24215f65eda0962d6f3">HC_SR04_READ_ERR</a>): {</div><div class="line">    <span class="comment">// Hit here when the sensor read is invalid        </span></div><div class="line">    <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">  <span class="keywordflow">default</span>:</div><div class="line">    <span class="keywordflow">break</span>;</div><div class="line">}</div></div><!-- fragment --><h2><a class="anchor" id="step5"></a>
Step 5: How to read the value from the Sensor  :V</h2>
<p>The easy and simple part... in this part , we can expect a traded value in centimeters or inches according the initial setup. </p><div class="fragment"><div class="line">Lectura = Sensor_A.Read();</div></div><!-- fragment --><h2><a class="anchor" id="sample_sketch"></a>
Sample Arduino Skecth</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_h_c___s_r04__lib_8h.html">HC_SR04_lib.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> Triger_Pin = 12;</div><div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> Echo_Pin = 11;</div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> Lectura = 0;</div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> status_sens = 0;</div><div class="line"><a class="code" href="class_h_c___s_r04_dev.html">HC_SR04Dev</a> Sensor_A(Triger_Pin, Echo_Pin,<a class="code" href="_h_c___s_r04__lib_8h.html#a7b521ba18979ed156de76918beca0fbfa45c3145a2a8a1505cbdbd04830ca039a">UNITS_METRIC</a>);</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> setup() {</div><div class="line">  Serial.begin(9600);</div><div class="line">  <span class="comment">// Min: 10 cm</span></div><div class="line">  <span class="comment">// Max:200 cm</span></div><div class="line">  Sensor_A.SetMinMax(10, 200);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> loop() {</div><div class="line">  <span class="comment">// put your main code here, to run repeatedly:</span></div><div class="line">  delay(100);</div><div class="line">  status_sens = Sensor_A.Sync();</div><div class="line"></div><div class="line">  <span class="keywordflow">switch</span> (status_sens) {</div><div class="line">    <span class="keywordflow">case</span> (<a class="code" href="_h_c___s_r04__lib_8h.html#afa1b1edf6947ca1c4024f4f52db00ee7a4aae3d8cbf8016488bfc27e16e5492c1">HC_SR04_OFF</a>): {</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">      }</div><div class="line">    <span class="keywordflow">case</span> (<a class="code" href="_h_c___s_r04__lib_8h.html#afa1b1edf6947ca1c4024f4f52db00ee7a75a3c9ac21cf90f3a684c6eb6541d19b">HC_SR04_TIMEOUT_READ</a>): {</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">      }</div><div class="line">    <span class="keywordflow">case</span> (<a class="code" href="_h_c___s_r04__lib_8h.html#afa1b1edf6947ca1c4024f4f52db00ee7ae06184c02f3d88443b47c0f903d72895">HC_SR04_READ_OK</a>): {</div><div class="line">        Lectura = Sensor_A.Read();</div><div class="line">        Serial.print(<span class="stringliteral">&quot;Lectura OK: &quot;</span>);</div><div class="line">        Serial.print(Lectura);</div><div class="line">        Serial.println(<span class="stringliteral">&quot; Centimeters&quot;</span>);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">      }</div><div class="line">    <span class="keywordflow">case</span> (<a class="code" href="_h_c___s_r04__lib_8h.html#afa1b1edf6947ca1c4024f4f52db00ee7aeeed0a4cc3e0e799aaec2407fd146285">HC_SR04_UNDER_MIN</a>): {</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">      }</div><div class="line">    <span class="keywordflow">case</span> (<a class="code" href="_h_c___s_r04__lib_8h.html#afa1b1edf6947ca1c4024f4f52db00ee7a8b474fcff26ccf982124d8bf5d21ec16">HC_SR04_OVER_MAX</a>): {</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">      }</div><div class="line">    <span class="keywordflow">case</span> (<a class="code" href="_h_c___s_r04__lib_8h.html#afa1b1edf6947ca1c4024f4f52db00ee7a762f09b27a3ab24215f65eda0962d6f3">HC_SR04_READ_ERR</a>): {</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">      }</div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">      <span class="keywordflow">break</span>;</div><div class="line">  }</div><div class="line"></div><div class="line">}</div></div><!-- fragment --><h2><a class="anchor" id="api_lib"></a>
Library Methods</h2>
<p><a class="el" href="class_h_c___s_r04_dev.html#a1c309e8ee20384fcf05ec2c1ff1da657" title="Returns the Status from the Last Read. ">HC_SR04Dev::Status()</a>;</p>
<p><a class="el" href="class_h_c___s_r04_dev.html#ade8e4096c56f718a4eceb54d1c9e6254" title="Set Min and Max Threshold limits. ">HC_SR04Dev::SetMinMax(unsigned long _min_range,unsigned long _max_range)</a>;</p>
<p><a class="el" href="class_h_c___s_r04_dev.html#a9b46acb9d8ff4234e12eac1e86963a22" title="Returns the distance readed from the HC_SR04 Sensor in Centimeters or Inches. ">HC_SR04Dev::Read()</a>;</p>
<p>unsigned char <a class="el" href="class_h_c___s_r04_dev.html#a3c77c40dc1b49c2a8e1235d8011d3d96" title="Hardware Syncronization. ">HC_SR04Dev::Sync()</a>;</p>
<p><a class="el" href="class_h_c___s_r04_dev.html#a3c2e239120b4b90df45afe3efe2582ac" title="Class Constructor HC_SR04Dev The class HC_SR04Dev itÂ´s initialized with the main parameters _trigger_...">HC_SR04Dev::HC_SR04Dev(int _trigger_pin,int _echo_pin)</a>;</p>
<h2><a class="anchor" id="my_contact"></a>
Contact Info</h2>
<p>Please sendme your comments or questions to <a href="#" onclick="location.href='mai'+'lto:'+'esa'+'nc'+'hez'+'.b'+'rio'+'ne'+'s@y'+'ah'+'oo.'+'co'+'m.m'+'x'; return false;">esanc<span style="display: none;">.nosp@m.</span>hez.<span style="display: none;">.nosp@m.</span>brion<span style="display: none;">.nosp@m.</span>es@y<span style="display: none;">.nosp@m.</span>ahoo.<span style="display: none;">.nosp@m.</span>com.<span style="display: none;">.nosp@m.</span>mx</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
